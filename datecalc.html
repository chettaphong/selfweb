<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Date Calculator â€“ Calendar Picker + DDâ€‘MMâ€‘YYYY Display</title>
<style>
  body{
    font-family:Arial,Helvetica,sans-serif;
    max-width:560px;margin:auto;padding:15px;line-height:1.4;
  }
  h1{margin:0 0 10px;font-size:1.4rem;text-align:center;}

  .tabs{
    border:1px solid #bbb;border-radius:4px;overflow:hidden;background:#fafafa;
  }
  .tab-header{
    display:flex;background:#e0e0e0;
  }
  .tab-header button{
    flex:1;padding:6px 0;border:none;background:#e0e0e0;cursor:pointer;
    font-size:.95rem;
  }
  .tab-header button.active{background:#fff;font-weight:bold;}
  .tab-content{padding:8px;display:none;}
  .tab-content.active{display:block;}

  label, input, button{
    display:block;width:100%;margin:4px 0;
  }
  input[type=date],
  input[type=number]{
    padding:4px 6px;font-size:.93rem;
  }
  button{
    padding:6px 10px;font-size:.93rem;
    background:#0066ff;color:#fff;border:none;border-radius:3px;cursor:pointer;
  }
  button:hover{background:#0052cc;}

  .result{
    margin-top:10px;font-weight:bold;word-break:break-word;
  }
</style>
</head>
<body>

<h1>ğŸ—“ï¸ Date Calculator</h1>

<div class="tabs">
  <div class="tab-header">
    <button class="active" data-tab="between">Daysâ€¯Between</button>
    <button data-tab="offset">Add / Subtract</button>
  </div>

  <!-- ----- Days Between ----- -->
  <div id="between" class="tab-content active">
    <label for="start">Start date</label>
    <input type="date" id="start">
    <label for="end">End date</label>
    <input type="date" id="end">
    <button onclick="calcDaysBetween()">Calculate</button>
  </div>

  <!-- ----- Add / Subtract ----- -->
  <div id="offset" class="tab-content">
    <label for="base">Base date</label>
    <input type="date" id="base">
    <label for="delta">Offset (Â± days)</label>
    <input type="number" id="delta" placeholder="e.g., 5 or -3">
    <button onclick="calcOffsetDate()">Get New Date</button>
  </div>
</div>

<div class="result" id="output"></div>

<script>
/* ---------- Helpers for display format ---------- */
function isoToDisplay(iso){               // "2025-11-26" â†’ "26-11-2025"
  const [y,m,d] = iso.split('-');
  return `${d}-${m}-${y}`;
}

/* ---------- Set today as default (ISO value) ---------- */
function setTodayDefaults(){
  const today = new Date();
  const iso   = today.toISOString().slice(0,10);   // "2025-11-26"
  document.getElementById('start').value = iso;
  document.getElementById('base').value  = iso;
}
setTodayDefaults();

/* ---------- Core date math (UTC midnight) ---------- */
const MS_PER_DAY = 86400000;
function utcMidnight(dateStr){
  const d = new Date(dateStr);
  return Date.UTC(d.getFullYear(), d.getMonth(), d.getDate());
}
function daysBetween(a,b){
  return Math.abs(Math.round((utcMidnight(b)-utcMidnight(a))/MS_PER_DAY));
}
function offsetDate(base,n){
  const newMs = utcMidnight(base) + n*MS_PER_DAY;
  return new Date(newMs).toISOString().slice(0,10);
}

/* ---------- UI callbacks ---------- */
function setOut(txt){ document.getElementById('output').textContent = txt; }

function calcDaysBetween(){
  const s=document.getElementById('start').value,
        e=document.getElementById('end').value;
  if(!s||!e){ setOut('Please select both dates.'); return; }
  const d = daysBetween(s,e);
  setOut(`${d} day${d!==1?'s':''} between ${isoToDisplay(s)} and ${isoToDisplay(e)}.`);
}

function calcOffsetDate(){
  const b=document.getElementById('base').value,
        o=parseInt(document.getElementById('delta').value,10);
  if(!b||isNaN(o)){ setOut('Enter a base date and a numeric offset.'); return; }
  const newIso = offsetDate(b,o);
  const dir    = o>=0?'after':'before';
  const n      = Math.abs(o);
  setOut(`${n} day${n!==1?'s':''} ${dir} ${isoToDisplay(b)} â†’ ${isoToDisplay(newIso)}.`);
}

/* ---------- Tab switching ---------- */
document.querySelectorAll('.tab-header button').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.tab-header button')
            .forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');

    const target = btn.dataset.tab;
    document.querySelectorAll('.tab-content')
            .forEach(p=>p.classList.toggle('active', p.id===target));
  });
});
</script>

</body>
</html>
